import socket
import sys

IP = sys.argv[1]
porta = int(sys.argv[2])

servidor = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

while True:
    mensagem = input("> ")
    servidor.sendto(mensagem.encode(), (IP, porta))

    if mensagem == 'sair':
        servidor.sendto('\n< Finalizando...'.encode(), (IP, porta))
        servidor.close()
        break

    mensagemServidor, EndServidor = servidor.recvfrom(1024)

    if mensagemServidor.decode() == 'Finalizando...':
        print(f"< {'Finalizando...'} - {EndServidor}\n")
        servidor.close()
        break
    print(f"< {mensagemServidor.decode()} - {EndServidor}\n")


