import socket
import sys

servidor = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

IP = '0.0.0.0'
porta = int(sys.argv[1])
senha = '123456'

servidor.bind((IP,porta))

print(f"\nAguandando conex√£o UDP com {IP}:{porta}\n")



while True:
    mensagemCliente, EndCliente = servidor.recvfrom(1024)

    if mensagemCliente.decode() == 'sair':
        print(f"< {'Finalizando...'} - {EndCliente}\n")
        servidor.close()
        break

    print(f"\n< {mensagemCliente.decode()} - {EndCliente}")

    mensagem = input("> ")

    if mensagem == 'sair':
        servidor.sendto('Finalizando...'.encode(), (EndCliente))
        servidor.close()
        break
    servidor.sendto(mensagem.encode(), (EndCliente))

