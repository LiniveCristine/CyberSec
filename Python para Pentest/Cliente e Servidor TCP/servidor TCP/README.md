# ğŸ–§ Criando um Servidor TCP em Python

Este guia apresenta os conceitos bÃ¡sicos para criaÃ§Ã£o de um **servidor TCP** utilizando a biblioteca `socket` do Python.

---

## ğŸ“¦ Importando a biblioteca Socket

```python
import socket
```

A biblioteca `socket` Ã© utilizada para trabalhar com **redes**, permitindo a criaÃ§Ã£o de servidores e clientes TCP/UDP.

### Principais funÃ§Ãµes e mÃ©todos

- `socket()`
- `bind()`
- `listen()`
- `accept()`
- `connect()`
- `connect_ex()`
- `send()`
- `recv()`
- `close()`

---

## ğŸš€ Iniciando o Socket

```python
server = socket.socket()
```

Cria um socket com configuraÃ§Ãµes padrÃ£o.

---

## ğŸŒ Trabalhando com IPv4 ou IPv6

- `socket.AF_INET` â†’ IPv4
- `socket.AF_INET6` â†’ IPv6

Exemplo usando **IPv4**:

```python
server = socket.socket(socket.AF_INET)
```

---

## ğŸ”„ Trabalhando com TCP ou UDP

- `socket.SOCK_STREAM` â†’ TCP
- `socket.SOCK_DGRAM` â†’ UDP

Exemplo usando **TCP**:

```python
server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
```

---

## ğŸ“ Definindo o Socket do Servidor

```python
server.bind(('0.0.0.0', 8080))
```

Com o mÃ©todo `bind()` vocÃª define:

- **EndereÃ§o IP**: `0.0.0.0` â†’ aceita conexÃµes em todas as interfaces da mÃ¡quina
- **Porta**: `8080`

Isso permite que qualquer endereÃ§o da mÃ¡quina seja acessado pela porta **8080**.

---

## ğŸ‘‚ Aguardando ConexÃµes (Escuta)

```python
server.listen(1)
```

- Inicia o modo de escuta do servidor
- O nÃºmero `1` indica que apenas **uma conexÃ£o** serÃ¡ aceita por vez

---

## ğŸ¤ Aceitando ConexÃµes

```python
conexao, endCliente = server.accept()
```

- O mÃ©todo `accept()` **bloqueia a execuÃ§Ã£o** atÃ© que um cliente se conecte
- Ele retorna:
  - O **socket do cliente**: endereÃ§o IP e porta do cliente
  - O **InformaÃ§Ãµes sobre a conexÃ£o**

---

# Enviar e Receber Dados do Cliente

Ã‰ possÃ­vel enviar mensagens para o cliente e receber mensagens dele utilizando os mÃ©todos:

- `.send()`
- `.recv()`

## CodificaÃ§Ã£o e DecodificaÃ§Ã£o

Um detalhe importante Ã© que as mensagens trafegam em **bytes**.
Por isso:

- **Encode** â†’ no momento do envio
- **Decode** â†’ no momento do recebimento

### Exemplo: Enviando Mensagem

```python
mensagem = input("> ")
conexao.send(mensagem.encode())
```

Neste caso, a mensagem digitada Ã© codificada em bytes e enviada ao cliente.

### Exemplo: Recebendo Mensagem

```python
dados_cliente = conexao.recv(1024)
print(f"{dados_cliente.decode()}\n")
```

- O mÃ©todo `.recv(1024)` recebe atÃ© **1024 bytes**
- A mensagem recebida Ã© decodificada antes de ser exibida

---

# Sistema de Senha Simples

Utilizando os mÃ©todos apresentados, Ã© possÃ­vel implementar um **sistema de autenticaÃ§Ã£o simples**.

## DefiniÃ§Ã£o da Senha do Servidor

```python
senha_servidor = "123456\n"
ou
senha_servidor = "123456"
```

> âš ï¸ Importante:
> Por padrÃ£o, a resposta do usuÃ¡rio vinda do **netcat** vem com uma **quebra de linha (`\n`)\*\*.
> Mas as respostas vindas do **nosso cliente nÃ£o vem com quebra linha padÃ£o\*\*.

## Coletando a Senha do Cliente

```python
conexao.send("Digite a senha: ".encode())
senha_cliente = conexao.recv(1024)
```

## ValidaÃ§Ã£o da Senha

```python
if senha_cliente.decode() == senha_servidor:
    print("Senha correta")
else:
    print("Senha incorreta")
```

A senha recebida Ã© decodificada e comparada com a senha definida localmente no servidor.

---

# ğŸ“¥ Recebendo Argumentos

Para deixar a **porta dinÃ¢mica**, podemos informÃ¡-la como **argumento de linha de comando** no momento de iniciar o servidor ğŸš€

## ğŸ“¦ Utilizando o MÃ³dulo `sys`

Para trabalhar com argumentos passados via terminal, utilizamos o mÃ³dulo `sys`.

```python
import sys
```

## ğŸ”¢ Definindo a Porta DinÃ¢mica

A porta serÃ¡ recebida como argumento e convertida para o tipo inteiro.

```python
porta = int(sys.argv[1])
```

- ğŸ“Œ O argumento deve ser passado na **posiÃ§Ã£o correta**
- ğŸ§® A conversÃ£o para `int` Ã© necessÃ¡ria, pois a porta deve ser numÃ©rica
- âš ï¸ Caso o argumento nÃ£o seja informado, o programa irÃ¡ gerar erro

## â–¶ï¸ Executando o Servidor

Exemplo de execuÃ§Ã£o no terminal:

```bash
python servidor.py 8080
```

- ğŸ”Œ `8080` representa a porta utilizada pelo servidor
- â™»ï¸ Isso permite reutilizar o cÃ³digo com portas diferentes sem modificaÃ§Ãµes

---
