## ğŸšª Scanner de Portas em Python

---

### 1. ğŸ§  Conceito de Scanner de Portas

Um **scanner de portas** verifica se uma porta estÃ¡ aberta ou fechada em um host.

**Como funciona:**

- Tenta se conectar Ã  porta.
- Resultado:
  - ğŸŸ¢ Conectou â†’ **porta aberta**
  - ğŸ”´ Falhou â†’ **porta fechada**

---

### 2. ğŸ”Œ Criando um cliente TCP em Python

Para testar a conexÃ£o com uma porta, usamos o mÃ³dulo **socket**.

```python
import socket
cliente = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
```

#### ğŸ“– ExplicaÃ§Ã£o

| ParÃ¢metro     | Significado   |
| ------------- | ------------- |
| `AF_INET`     | Usa IPv4      |
| `SOCK_STREAM` | Protocolo TCP |

---

### 3. â±ï¸ Ajustando o Timeout

Por padrÃ£o, o cliente espera muito tempo antes de considerar a conexÃ£o como falha, deixando o script lento.

```python
cliente.settimeout(0.1)
```

- O cliente espera **0,1 segundo**.
- ApÃ³s isso, considera **timeout**.

**Resultado:**

- âš¡ Script mais rÃ¡pido.

---

### 4. ğŸ”— Estabelecendo conexÃ£o

Existem duas funÃ§Ãµes principais:

#### `connect()`

- Exige tratamento de erro com:

```python
try:
    cliente.connect((IP, porta))
except:
    pass
```

#### `connect_ex()` (mais simples)

- Retorna **cÃ³digo de status**.
- NÃ£o precisa de `try/except`.

```python
codigo = cliente.connect_ex((IP, porta))
```

| CÃ³digo retornado | Significado                            |
| ---------------- | -------------------------------------- |
| `0`              | ConexÃ£o estabelecida â†’ ğŸŸ¢ Porta aberta |
| Outro valor      | Falha na conexÃ£o â†’ ğŸ”´ Porta fechada    |

Exemplo:

```python
if codigo == 0:
    print("Porta aberta")
```

---

### 5. ğŸ”¢ Quantas portas existem?

O total de portas TCP/UDP Ã©:

**0 a 65535 â†’ 65.536 portas**

---

### 6. ğŸ” Loop de varredura

O scanner irÃ¡:

1. Repetir um loop **65.536 vezes**.
2. A cada volta:
   - Criar um cliente TCP.
   - Testar uma porta.
   - Fechar o cliente.

Para organizar o cÃ³digo, usamos uma funÃ§Ã£o:

```python
def checkport(IP, porta):
```

Essa funÃ§Ã£o:

- Recebe o endereÃ§o IP.
- Recebe a porta.
- Testa a conexÃ£o.

---

### 7. ğŸŒ Implementando resoluÃ§Ã£o de domÃ­nios

O script fica lento se o domÃ­nio for resolvido a cada tentativa de conexÃ£o.

**SoluÃ§Ã£o:**

- Resolver o domÃ­nio **uma Ãºnica vez**.
- Usar o IP no restante do cÃ³digo.

FunÃ§Ã£o de resoluÃ§Ã£o:

```python
def dns(dominio):
    IP = socket.getaddrinfo(dominio, None, socket.AF_INET)
    return str(IP[0][4][0])
```

#### ğŸ“– ExplicaÃ§Ã£o

- `getaddrinfo()` retorna uma lista de tuplas.
- Precisamos apenas do endereÃ§o IP:

```
IP[0][4][0]
```

**Vantagem:**

- âš¡ Script mais rÃ¡pido.
- Evita resoluÃ§Ã£o de domÃ­nio a cada porta.

---

### 8. âš ï¸ ObservaÃ§Ã£o importante

- O projeto ainda estÃ¡ **em desenvolvimento**.
- No futuro, pode ser melhorado com:
  - ğŸ¯ Filtro de portas mais usadas.
  - âš¡ ExecuÃ§Ã£o paralela.
  - ğŸ“Š RelatÃ³rios mais completos.
