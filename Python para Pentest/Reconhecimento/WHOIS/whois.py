import socket
import sys

dominio = sys.argv[1]
dominio_env = dominio+'\r\n'
servidor = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

servidor.connect(("whois.iana.org", 43))
servidor.send(dominio_env.encode())

s_whois_primario = servidor.recv(1024).decode().split("refer:        ")[1].split("\n")[0]
print(s_whois_primario)
servidor.close()

servidor = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
servidor.connect((s_whois_primario, 43))
servidor.send(dominio_env.encode())

s_whois_secundario = servidor.recv(1024).decode().split("\n")[2].split(" ")[6]
s_whois_secundario = s_whois_secundario.replace("\r","")
print(s_whois_secundario)
servidor.close()


servidor = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
servidor.connect((s_whois_secundario, 43))
servidor.send(dominio_env.encode())

resposta_final = servidor.recv(2024).decode()
print(resposta_final)



