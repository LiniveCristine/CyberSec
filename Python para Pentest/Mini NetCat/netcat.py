import servers
import clients
import sys

help = """ netcat.py USO

python3 netcat.py -s [TCP/UDP] porta
python3 netcat.py -c [TCP/UDP] ip porta

"""

try:
    func = sys.argv[1]
except:
    print(help)
    exit(0)

if func == '-s': 
    TipoServidor = sys.argv[2]
    IP = '0.0.0.0'
    porta = int(sys.argv[3])
    servidor = servers.Server

    if TipoServidor == 'TCP':

        try:
            servidor.TCP(IP, porta)
        except KeyboardInterrupt:
            exit(0)

    elif TipoServidor =='UDP':
        try:
            servidor.UDP(IP, porta)
        except KeyboardInterrupt:
            exit(0)

if func == '-c':
    TipoServidor = sys.argv[2]
    IP = sys.argv[3]
    porta = int(sys.argv[4])

    cliente = clients.Cliente

    if TipoServidor == 'TCP':
        try:
            cliente.TCP(IP, porta)
        except KeyboardInterrupt:
            exit(0)

    elif TipoServidor == 'UDP':
        try:
            cliente.UDP(IP, porta)
        except KeyboardInterrupt:
            exit(0)

if func == '-h' or func == '--help':
    print(help)