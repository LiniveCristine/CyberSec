import socket

class Cliente:
    def TCP(IP, porta):
        servidor = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        servidor.connect((IP, porta))

        mensagem = servidor.recv(1024).decode()

        senha = input(f"> {mensagem}: ")
        servidor.send(senha.encode())

        print(servidor.recv(1024).decode())

        while True:
            dados_servidor = servidor.recv(1024)

            if dados_servidor.decode() == "< Conexão finalizada":
                print("\nConexão encerrada\n")
                servidor.close()
                break

            print(dados_servidor.decode())
            mensagem = input("> ")
            
            if mensagem == 'sair':
                servidor.send("\nConexão encerrada\n".encode())
                servidor.close()
                break
            mensagem += '\n'
            servidor.send(mensagem.encode())

    def UDP(IP, porta):
        servidor = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

        while True:
            mensagem = input("> ")
            servidor.sendto(mensagem.encode(), (IP, porta))

            if mensagem == 'sair':
                servidor.sendto('\n< Finalizando...'.encode(), (IP, porta))
                servidor.close()
                break

            mensagemServidor, EndServidor = servidor.recvfrom(1024)

            if mensagemServidor.decode() == 'Finalizando...':
                print(f"< {'Finalizando...'} - {EndServidor}\n")
                servidor.close()
                break
            print(f"< {mensagemServidor.decode()} - {EndServidor}\n")
